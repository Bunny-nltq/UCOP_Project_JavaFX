<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.chart.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<BorderPane xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.ucop.controller.DashboardController"
            stylesheets="@../css/customer-style.css">
    
    <!-- Top Header -->
    <top>
        <VBox>
            <!-- Main Header -->
            <HBox alignment="CENTER_LEFT" spacing="20" styleClass="admin-header" 
                  style="-fx-background-color: linear-gradient(to right, #5b6b7a, #4a5a68); -fx-padding: 15 30;">
                
                <!-- Logo and Title -->
                <Label text="UCOP - ADMIN DASHBOARD" textFill="white" styleClass="admin-header-title">
                    <font>
                        <Font name="System Bold" size="22"/>
                    </font>
                </Label>
                
                <!-- Spacer -->
                <Region HBox.hgrow="ALWAYS"/>
                
                <!-- User Info and Logout -->
                <HBox alignment="CENTER_RIGHT" spacing="15">
                    <Label text="Hello, Admin!" textFill="white">
                        <font>
                            <Font size="14"/>
                        </font>
                    </Label>
                    <Button text="ÄÄƒng xuáº¥t" styleClass="admin-logout-button" onAction="#handleExit"
                            style="-fx-background-color: #dc3545; -fx-text-fill: white; -fx-background-radius: 5; -fx-padding: 8 20; -fx-font-weight: bold;">
                        <font>
                            <Font size="13"/>
                        </font>
                    </Button>
                </HBox>
            </HBox>
            
            <!-- Navigation Tabs -->
            <HBox alignment="CENTER_LEFT" spacing="20" styleClass="admin-nav-menu" 
                  style="-fx-background-color: #b38db3ff; -fx-pref-height: 60; -fx-border-color: #e0e0e0; -fx-border-width: 0 0 1 0; -fx-padding: 0 0 0 20;">
                
                <Button text="Há»‡ Thá»‘ng" styleClass="admin-nav-button" onAction="#showDashboard"
                        style="-fx-background-color: #CC9999; -fx-text-fill: #333; -fx-padding:  6 20; -fx-border-width: 0; -fx-background-radius: 6; -fx-font-size: 14;">
                    <font>
                        <Font size="14"/>
                    </font>
                </Button>
                
                <Button text="Quáº£n LÃ½" styleClass="admin-nav-button" onAction="#showPromotionManagement"
                        style="-fx-background-color: #CC9999; -fx-text-fill: #333; -fx-padding: 6 20; -fx-border-width: 0; -fx-background-radius: 6; -fx-font-size: 14;">
                    <font>
                        <Font size="14"/>
                    </font>
                </Button>
                
                <Button text="BÃ¡o CÃ¡o" styleClass="admin-nav-button" onAction="#showRevenueReport"
                        style="-fx-background-color: #CC9999; -fx-text-fill: #333; -fx-padding: 6 20; -fx-border-width: 0; -fx-background-radius: 6; -fx-font-size: 14;">
                    <font>
                        <Font size="14"/>
                    </font>
                </Button>
                
                <Button text="Trá»£ GiÃºp" styleClass="admin-nav-button" onAction="#showHelp"
                        style="-fx-background-color: #CC9999; -fx-text-fill: #333; -fx-padding: 6 20; -fx-border-width: 0; -fx-background-radius: 6; -fx-font-size: 14;">
                    <font>
                        <Font size="14"/>
                    </font>
                </Button>
            </HBox>
            
           
        </VBox>
    </top>
    
    <!-- Main Content Area -->
    <center>
        <StackPane fx:id="contentArea">
            <ScrollPane fx:id="dashboardView" fitToWidth="true" fitToHeight="true">
                <VBox spacing="15" style="-fx-padding: 15;">
                    
                    <!-- Statistics Cards -->
                <HBox spacing="15" alignment="CENTER">
                    <VBox alignment="CENTER" spacing="3" style="-fx-background-color: #4CAF50; -fx-padding: 12; -fx-background-radius: 8;" HBox.hgrow="ALWAYS">
                        <Label text="Tá»•ng Doanh Thu" textFill="white">
                            <font><Font size="12"/></font>
                        </Label>
                        <Label fx:id="lblTotalRevenue" text="0 Ä‘" textFill="white">
                            <font><Font name="System Bold" size="18"/></font>
                        </Label>
                    </VBox>
                    
                    <VBox alignment="CENTER" spacing="3" style="-fx-background-color: #2196F3; -fx-padding: 12; -fx-background-radius: 8;" HBox.hgrow="ALWAYS">
                        <Label text="Tá»•ng ÄÆ¡n HÃ ng" textFill="white">
                            <font><Font size="12"/></font>
                        </Label>
                        <Label fx:id="lblTotalOrders" text="0" textFill="white">
                            <font><Font name="System Bold" size="18"/></font>
                        </Label>
                    </VBox>
                    
                    <VBox alignment="CENTER" spacing="3" style="-fx-background-color: #FF9800; -fx-padding: 12; -fx-background-radius: 8;" HBox.hgrow="ALWAYS">
                        <Label text="ÄÆ¡n Chá» Xá»­ LÃ½" textFill="white">
                            <font><Font size="12"/></font>
                        </Label>
                        <Label fx:id="lblPendingOrders" text="0" textFill="white">
                            <font><Font name="System Bold" size="18"/></font>
                        </Label>
                    </VBox>
                    
                    <VBox alignment="CENTER" spacing="3" style="-fx-background-color: #F44336; -fx-padding: 12; -fx-background-radius: 8;" HBox.hgrow="ALWAYS">
                        <Label text="Sáº£n Pháº©m Sáº¯p Háº¿t" textFill="white">
                            <font><Font size="12"/></font>
                        </Label>
                        <Label fx:id="lblLowStockItems" text="0" textFill="white">
                            <font><Font name="System Bold" size="18"/></font>
                        </Label>
                    </VBox>
                </HBox>
                
                <!-- Charts Row 1 -->
                <HBox spacing="15">
                    <VBox spacing="8" HBox.hgrow="ALWAYS" style="-fx-border-color: #ddd; -fx-border-radius: 5; -fx-padding: 10;">
                        <Label text="ðŸ“ˆ Doanh Thu 7 NgÃ y Qua">
                            <font><Font name="System Bold" size="14"/></font>
                        </Label>
                        <BarChart fx:id="revenueChart" prefHeight="200" legendVisible="false">
                            <xAxis>
                                <CategoryAxis side="BOTTOM" label="NgÃ y"/>
                            </xAxis>
                            <yAxis>
                                <NumberAxis side="LEFT" label="Doanh Thu (VNÄ)"/>
                            </yAxis>
                        </BarChart>
                    </VBox>
                    
                    <VBox spacing="8" HBox.hgrow="ALWAYS" style="-fx-border-color: #ddd; -fx-border-radius: 5; -fx-padding: 10;">
                        <Label text="ðŸ’³ PhÆ°Æ¡ng Thá»©c Thanh ToÃ¡n">
                            <font><Font name="System Bold" size="14"/></font>
                        </Label>
                        <PieChart fx:id="paymentMethodChart" prefHeight="200" legendSide="BOTTOM"/>
                    </VBox>
                </HBox>
                
                <!-- Charts Row 2 -->
                <HBox spacing="15">
                    <VBox spacing="8" HBox.hgrow="ALWAYS" style="-fx-border-color: #ddd; -fx-border-radius: 5; -fx-padding: 10;">
                        <Label text="ðŸ† Top 5 Sáº£n Pháº©m BÃ¡n Cháº¡y">
                            <font><Font name="System Bold" size="14"/></font>
                        </Label>
                        <BarChart fx:id="topProductsChart" prefHeight="200" legendVisible="false">
                            <xAxis>
                                <CategoryAxis side="BOTTOM" label="Sáº£n Pháº©m"/>
                            </xAxis>
                            <yAxis>
                                <NumberAxis side="LEFT" label="Sá»‘ LÆ°á»£ng BÃ¡n"/>
                            </yAxis>
                        </BarChart>
                    </VBox>
                    
                    <VBox spacing="8" HBox.hgrow="ALWAYS" style="-fx-border-color: #ddd; -fx-border-radius: 5; -fx-padding: 10;">
                        <Label text="ðŸ“¦ Tráº¡ng ThÃ¡i ÄÆ¡n HÃ ng">
                            <font><Font name="System Bold" size="14"/></font>
                        </Label>
                        <PieChart fx:id="orderStatusChart" prefHeight="200" legendSide="BOTTOM"/>
                    </VBox>
                </HBox>
                
                <!-- Quick Actions -->
                <HBox spacing="15" alignment="CENTER" style="-fx-padding: 10;">
                    <Button text="ðŸŽ Quáº£n LÃ½ Khuyáº¿n MÃ£i" onAction="#showPromotionManagement" 
                            style="-fx-background-color: #9C27B0; -fx-text-fill: white; -fx-font-size: 14px; -fx-padding: 10 20;">
                    </Button>
                    <Button text="ðŸ“¦ Xem Kho HÃ ng" onAction="#showWarehouseManagement"
                            style="-fx-background-color: #3F51B5; -fx-text-fill: white; -fx-font-size: 14px; -fx-padding: 10 20;">
                    </Button>
                    <Button text="ðŸ›’ Quáº£n LÃ½ ÄÆ¡n HÃ ng" onAction="#showOrderManagement"
                            style="-fx-background-color: #009688; -fx-text-fill: white; -fx-font-size: 14px; -fx-padding: 10 20;">
                    </Button>
                    <Button text="ðŸ“Š Xuáº¥t BÃ¡o CÃ¡o" onAction="#exportReport"
                            style="-fx-background-color: #FF5722; -fx-text-fill: white; -fx-font-size: 14px; -fx-padding: 10 20;">
                    </Button>
                    <Button text="ðŸ”„ LÃ m Má»›i" onAction="#refreshDashboard"
                            style="-fx-background-color: #4CAF50; -fx-text-fill: white; -fx-font-size: 14px; -fx-padding: 10 20;">
                    </Button>
                </HBox>
                
            </VBox>
        </ScrollPane>
        </StackPane>
    </center>
    
    <!-- Bottom Status Bar -->
    <bottom>
        <HBox alignment="CENTER_LEFT" spacing="10" style="-fx-background-color: #f0f0f0; -fx-padding: 8;">
            <Label text="Tráº¡ng thÃ¡i:"/>
            <Label fx:id="lblStatus" text="Sáºµn sÃ ng" style="-fx-text-fill: green;"/>
            <Region HBox.hgrow="ALWAYS"/>
            <Label fx:id="lblDateTime" text="03/12/2025 21:30"/>
            <Label text="|"/>
            <Label text="PhiÃªn báº£n: 1.0.0"/>
        </HBox>
    </bottom>
    
</BorderPane>
