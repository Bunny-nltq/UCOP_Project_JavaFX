<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx/21"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.ucop.controller.customer.CustomerCartController"
            style="-fx-background-color: transparent;">

    <!-- HEADER -->
    <top>
        <HBox alignment="CENTER_LEFT" spacing="15" styleClass="header-box">
            <padding>
                <Insets top="20" right="20" bottom="10" left="20"/>
            </padding>

            <Label text="ðŸ›’ Giá» HÃ ng Cá»§a Báº¡n"
                   style="-fx-font-size: 24px; -fx-font-weight: bold;"/>

            <Region HBox.hgrow="ALWAYS"/>
        </HBox>
    </top>

    <!-- LEFT: CART ITEMS -->
    <center>
        <ScrollPane fx:id="scrollCart"
                    fitToWidth="true"
                    hbarPolicy="NEVER"
                    vbarPolicy="AS_NEEDED"
                    style="-fx-background-color: transparent;">
            <VBox fx:id="cartItemsContainer" spacing="10">
                <padding>
                    <Insets top="10" right="20" bottom="10" left="20"/>
                </padding>

                <Label fx:id="lblEmptyCart"
                       text="Giá» hÃ ng cá»§a báº¡n Ä‘ang trá»‘ng"
                       style="-fx-font-size: 18px; -fx-text-fill: #666;"
                       visible="false"
                       managed="false"/>
            </VBox>
        </ScrollPane>
    </center>

    <!-- RIGHT: CHECKOUT PANEL -->
    <right>
        <VBox fx:id="checkoutPanel"
              spacing="12"
              prefWidth="360"
              style="-fx-background-color: #ffffff; -fx-border-color: #e0e0e0; -fx-border-width: 1;">
            <padding>
                <Insets top="15" right="15" bottom="15" left="15"/>
            </padding>

            <!-- Promotion -->
            <Label text="MÃ£ giáº£m giÃ¡" style="-fx-font-weight: bold;"/>
            <HBox spacing="10">
                <TextField fx:id="txtPromoCode" promptText="Nháº­p mÃ£..." HBox.hgrow="ALWAYS"/>
                <Button text="Ãp dá»¥ng" onAction="#handleApplyPromo"/>
            </HBox>
            <Label fx:id="lblPromoMsg" text="" style="-fx-text-fill: #666;"/>

            <Separator/>

            <!-- Payment / Delivery -->
            <Label text="PhÆ°Æ¡ng thá»©c nháº­n hÃ ng" style="-fx-font-weight: bold;"/>

            <VBox spacing="8">
                <RadioButton fx:id="rbPickup"
                             text="Nháº­n táº¡i cá»­a hÃ ng"
                             onAction="#handleDeliveryModeChanged"/>

                <RadioButton fx:id="rbShip"
                             text="Ship Ä‘áº¿n nhÃ "
                             onAction="#handleDeliveryModeChanged"/>
            </VBox>

            <Separator/>

            <!-- Shipping Info -->
            <VBox fx:id="shippingForm" spacing="10" visible="false" managed="false">
                <Label text="ThÃ´ng tin ngÆ°á»i nháº­n" style="-fx-font-weight: bold;"/>

                <TextField fx:id="txtShipName" promptText="Há» tÃªn ngÆ°á»i nháº­n"/>
                <TextField fx:id="txtShipPhone" promptText="Sá»‘ Ä‘iá»‡n thoáº¡i"/>
                <TextField fx:id="txtShipAddress" promptText="Äá»‹a chá»‰"/>
                <HBox spacing="10">
                    <TextField fx:id="txtShipCity" promptText="ThÃ nh phá»‘" HBox.hgrow="ALWAYS"/>
                    <TextField fx:id="txtShipPostal" promptText="MÃ£ bÆ°u chÃ­nh" prefWidth="120"/>
                </HBox>

                <Label fx:id="lblShipMsg" text="" style="-fx-text-fill: #c0392b;"/>
            </VBox>

            <Separator/>

            <!-- Summary -->
            <Label text="TÃ³m táº¯t thanh toÃ¡n" style="-fx-font-weight: bold;"/>

            <GridPane hgap="10" vgap="8">
                <columnConstraints>
                    <ColumnConstraints percentWidth="55"/>
                    <ColumnConstraints percentWidth="45"/>
                </columnConstraints>

                <Label text="Tá»•ng sáº£n pháº©m:" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                <Label fx:id="lblTotalItems" text="0" GridPane.rowIndex="0" GridPane.columnIndex="1" style="-fx-font-weight:bold;"/>

                <Label text="Táº¡m tÃ­nh:" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                <Label fx:id="lblSubtotalAmount" text="0" GridPane.rowIndex="1" GridPane.columnIndex="1" style="-fx-font-weight:bold;"/>

                <Label text="Giáº£m giÃ¡:" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
                <Label fx:id="lblDiscountAmount" text="0" GridPane.rowIndex="2" GridPane.columnIndex="1"
                       style="-fx-font-weight:bold; -fx-text-fill:#27ae60;"/>

                <Label text="PhÃ­ ship:" GridPane.rowIndex="3" GridPane.columnIndex="0"/>
                <Label fx:id="lblShippingFee" text="0" GridPane.rowIndex="3" GridPane.columnIndex="1"
                       style="-fx-font-weight:bold;"/>

                <Label text="Tá»”NG THANH TOÃN:" GridPane.rowIndex="4" GridPane.columnIndex="0"
                       style="-fx-font-size: 14px; -fx-font-weight: bold;"/>
                <Label fx:id="lblTotalAmount" text="0" GridPane.rowIndex="4" GridPane.columnIndex="1"
                       style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill:#e74c3c;"/>
            </GridPane>

            <HBox spacing="12" alignment="CENTER_RIGHT">
                <Button text="XÃ³a giá»"
                        onAction="#handleClearCart"/>
                <Button text="Thanh toÃ¡n â†’"
                        onAction="#handleCheckout"
                        style="-fx-font-size: 15px;"/>
            </HBox>

        </VBox>
    </right>

</BorderPane>
